language: none

build:
  cache: true
  cache_dir_list:
    - /root/.config/NuGet
    - /root/.nuget
  pre_ci_boot:
    image_name: devopsrecipes/u16dotnet
    image_tag: "master.1"
    options: "-e HOME=/root"
  ci:
    - mono --version
    - msbuild /version
    - csc /version
    - echo 'Restoring NuGet dependencies...'
    - msbuild /target:restore /property:Configuration=Release /property:Platform="Any CPU" /maxcpucount /toolsversion:15.0 ci-csharp-consoleapp.sln
    - echo 'Building project...'
    - msbuild /property:Configuration=Release /property:Platform="Any CPU" /maxcpucount /toolsversion:15.0 ci-csharp-consoleapp.sln
    - echo 'Test drive the application on Ubuntu16'
    - ls -lR /root/.nuget/packages/newtonsoft.json/10.0.3
    - export MONO_PATH=/root/.nuget/packages/newtonsoft.json/10.0.3/lib/netstandard1.3:/root/.nuget/packages/newtonsoft.json/10.0.3/lib/netstandard1.0
    - mono ./ShippableCI/bin/Release/netcoreapp2.0/ci-csharp-consoleapp.dll
